{% extends "base.html" %}
{% block title %}Dati di {{ table_name }}{% endblock %}

{% block content %}
	<div class="container-fluid py-4">
		<h1 class="mb-4">Dati di {{ table_name }}</h1>

		<div class="table-responsive">
			<table id="data" class="table table-striped table-bordered nowrap w-100">
				<thead>
					<tr>
						{% for c in cols %}
							<th>{{ c }}</th>
						{% endfor %}
					</tr>
				</thead>
				<tbody>
					{% for r in rows %}
						<tr>
							{% for c in cols %}
								<td>{{ r[c] }}</td>
							{% endfor %}
						</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
	</div>

	{# ---------------- CSS / JS ---------------- #}
	<!-- Bootstrap 5 -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

	<!-- DataTables 2 + Bootstrap 5 integration -->
	<link href="https://cdn.datatables.net/2.3.1/css/dataTables.bootstrap5.min.css" rel="stylesheet">
	<link href="https://cdn.datatables.net/responsive/3.0.0/css/responsive.bootstrap5.min.css" rel="stylesheet">

	<style>
		/* Fix distacco header/body con scrollX */
		div.dt-scroll-head table,
		div.dt-scroll-body table { margin: 0 !important; }
	</style>

	<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
	<script src="https://cdn.datatables.net/2.3.1/js/dataTables.min.js"></script>
	<script src="https://cdn.datatables.net/2.3.1/js/dataTables.bootstrap5.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/3.0.0/js/dataTables.responsive.min.js"></script>
	<script src="https://cdn.datatables.net/responsive/3.0.0/js/responsive.bootstrap5.min.js"></script>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
			new DataTable('#data', {
				responsive: false,
				scrollX: true,
				language: {
					url: '//cdn.datatables.net/plug-ins/1.13.6/i18n/it-IT.json'
				}
				// layout di default: pageLength + search sopra, info + paging sotto
			});
		});
	</script>
{% endblock %}
